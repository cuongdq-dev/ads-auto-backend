import { MigrationInterface, QueryRunner } from "typeorm";

export class Migrations1762834260452 implements MigrationInterface {
    name = 'Migrations1762834260452'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`CREATE TABLE "admin_audit_logs" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "admin_user_id" uuid NOT NULL, "action" character varying(128) NOT NULL, "target_type" character varying(64), "target_id" uuid, "remarks" text, "meta" jsonb, "adminUserId" uuid, CONSTRAINT "PK_de7a8fc2fbb525484c71a86bb96" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_de7a8fc2fbb525484c71a86bb9" ON "admin_audit_logs" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_ee43923e8ce21dbe10bccaba85" ON "admin_audit_logs" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_8937fba1af21d770ab36a16e8e" ON "admin_audit_logs" ("admin_user_id") `);
        await queryRunner.query(`CREATE TABLE "creatives" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "ad_account_id" uuid NOT NULL, "external_id" character varying(64), "type" character varying(32), "url" text, "meta" jsonb, "adAccountId" uuid, CONSTRAINT "UQ_671b8220f25d34e4a191bcb4042" UNIQUE ("external_id"), CONSTRAINT "PK_fb146841da64b2b38449f618daf" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_fb146841da64b2b38449f618da" ON "creatives" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_c563ad6c645f306859978ea03d" ON "creatives" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_a6c42deca918327898e63eb1df" ON "creatives" ("ad_account_id") `);
        await queryRunner.query(`CREATE TABLE "insights" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "ad_account_id" uuid NOT NULL, "object_type" character varying(16) NOT NULL, "object_external_id" character varying(64) NOT NULL, "date_start" date NOT NULL, "date_end" date NOT NULL, "metric_data" jsonb NOT NULL, "fetched_at" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(), "adAccountId" uuid, "campaignId" uuid, "adSetId" uuid, "adId" uuid, CONSTRAINT "PK_8616ab29fa49b7942541b8c964a" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_8616ab29fa49b7942541b8c964" ON "insights" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_833a8b46ce0b25f698e4488f82" ON "insights" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_d76debc5a3479e113128c75feb" ON "insights" ("ad_account_id") `);
        await queryRunner.query(`CREATE TABLE "ads" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "ad_set_id" uuid NOT NULL, "external_id" character varying(64), "name" character varying(255), "status" character varying(32), "creative_id" uuid, "preview_url" text, "raw" jsonb, "adSetId" uuid, "creativeId" uuid, CONSTRAINT "UQ_348e79291fdb8f3d8c4e4fdac63" UNIQUE ("external_id"), CONSTRAINT "PK_a7af7d1998037a97076f758fc23" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_a7af7d1998037a97076f758fc2" ON "ads" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_1b70b1ae6d80cac88bd0991eb4" ON "ads" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_6a5671a83d8202c58be7d6516f" ON "ads" ("ad_set_id") `);
        await queryRunner.query(`CREATE TABLE "ad_sets" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "campaign_id" uuid NOT NULL, "external_id" character varying(64), "name" character varying(255), "status" character varying(32), "targeting" jsonb, "bid_strategy" character varying(64), "budget_amount" bigint, "start_time" TIMESTAMP WITH TIME ZONE, "end_time" TIMESTAMP WITH TIME ZONE, "raw" jsonb, "campaignId" uuid, CONSTRAINT "UQ_d2c2e59fe7aa45db8cde2930ee5" UNIQUE ("external_id"), CONSTRAINT "PK_94c878d0598e5927e7043a26569" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_94c878d0598e5927e7043a2656" ON "ad_sets" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_fd100d5f98b1088abc4a108a6e" ON "ad_sets" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_da62bc088aa0c99505b9bddbcc" ON "ad_sets" ("campaign_id") `);
        await queryRunner.query(`CREATE TABLE "campaigns" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "ad_account_id" uuid NOT NULL, "external_id" character varying(64), "name" character varying(255), "objective" character varying(64), "status" character varying(32), "budget_type" character varying(16), "budget_amount" bigint, "start_time" TIMESTAMP WITH TIME ZONE, "end_time" TIMESTAMP WITH TIME ZONE, "raw" jsonb, "adAccountId" uuid, CONSTRAINT "UQ_66407846c0aeab48114d4ae32b8" UNIQUE ("external_id"), CONSTRAINT "PK_831e3fcd4fc45b4e4c3f57a9ee4" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_831e3fcd4fc45b4e4c3f57a9ee" ON "campaigns" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_e787e23857eab09fbffacddd23" ON "campaigns" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_bb70cefacb92ef436f66ee0464" ON "campaigns" ("ad_account_id") `);
        await queryRunner.query(`CREATE TABLE "conversion_events" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "ad_account_id" uuid NOT NULL, "event_name" character varying(128) NOT NULL, "event_time" TIMESTAMP WITH TIME ZONE NOT NULL, "payload" jsonb, "dedup_key" character varying(255), "sent" boolean NOT NULL DEFAULT false, "response" jsonb, "adAccountId" uuid, CONSTRAINT "PK_3153e3513a6cd44a85bf528705f" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_3153e3513a6cd44a85bf528705" ON "conversion_events" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_8913f8cec63bc8fa52c67ceaa4" ON "conversion_events" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_d9d250303f16a274bb12ade90a" ON "conversion_events" ("ad_account_id") `);
        await queryRunner.query(`CREATE TABLE "rate_limits" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "ad_account_id" uuid NOT NULL, "window_start" TIMESTAMP WITH TIME ZONE NOT NULL, "calls" integer NOT NULL DEFAULT '0', "adAccountId" uuid, CONSTRAINT "PK_3b4449f1f5fc167d921ee619f65" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_3b4449f1f5fc167d921ee619f6" ON "rate_limits" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_7998a92d0bf5f034883c5be736" ON "rate_limits" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_71371f5e33477eb6edb6c28420" ON "rate_limits" ("ad_account_id") `);
        await queryRunner.query(`CREATE TABLE "user_ad_accounts" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "user_id" uuid NOT NULL, "ad_account_id" uuid NOT NULL, "meta_token_id" uuid, "role" character varying(32) NOT NULL DEFAULT 'editor', "is_active" boolean NOT NULL DEFAULT true, "assigned_by_admin_id" uuid, CONSTRAINT "PK_829aab27d2a098ba960ce1e5fb2" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_829aab27d2a098ba960ce1e5fb" ON "user_ad_accounts" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_c5d0df39c2f3c16e7809208070" ON "user_ad_accounts" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_66e59dab01c837e55eac094b2d" ON "user_ad_accounts" ("user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_244bd1ffd473a74b450106277e" ON "user_ad_accounts" ("ad_account_id") `);
        await queryRunner.query(`CREATE TABLE "ad_accounts" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "account_id" character varying(64) NOT NULL, "display_name" character varying(255), "currency" character varying(8), "timezone" character varying(64), CONSTRAINT "UQ_207a8e07a6d3e47a11e610a80f3" UNIQUE ("account_id"), CONSTRAINT "PK_7f3f9205ab9fc8719688750795e" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_7f3f9205ab9fc8719688750795" ON "ad_accounts" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_e44e40b2162520d4f99c1c5956" ON "ad_accounts" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_207a8e07a6d3e47a11e610a80f" ON "ad_accounts" ("account_id") `);
        await queryRunner.query(`CREATE TABLE "token_refresh_logs" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "meta_token_id" uuid NOT NULL, "attempt_at" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(), "success" boolean NOT NULL, "response" jsonb, "error_message" text, "metaTokenId" uuid, CONSTRAINT "PK_35912590277ffacdd08af620b49" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_35912590277ffacdd08af620b4" ON "token_refresh_logs" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_879cb08cd16c228eea265d6992" ON "token_refresh_logs" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_62c6b69edeb5bb6f0445cd87b7" ON "token_refresh_logs" ("meta_token_id") `);
        await queryRunner.query(`CREATE TABLE "meta_tokens" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "owner_user_id" uuid, "token_ciphertext" text NOT NULL, "token_iv" character varying(128) NOT NULL, "token_tag" character varying(128) NOT NULL, "token_fingerprint" character varying(128), "refresh_token_ciphertext" text, "refresh_token_iv" character varying(128), "refresh_token_tag" character varying(128), "scopes" text, "expires_at" TIMESTAMP WITH TIME ZONE, "revoked" boolean NOT NULL DEFAULT false, "last_used_at" TIMESTAMP WITH TIME ZONE, "ad_account_id" uuid, CONSTRAINT "PK_43894782234c465cf5b49fd689f" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_43894782234c465cf5b49fd689" ON "meta_tokens" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_44e70bd1d194cb1da9f20ca81f" ON "meta_tokens" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_32cd1512c02f087164a00b898e" ON "meta_tokens" ("owner_user_id") `);
        await queryRunner.query(`CREATE TABLE "roles" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "name" character varying, "code" "public"."roles_code_enum", "description" text, "type" character varying(50) NOT NULL DEFAULT 'custom', "is_active" boolean NOT NULL DEFAULT true, CONSTRAINT "PK_c1433d71a4838793a49dcad46ab" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_c1433d71a4838793a49dcad46a" ON "roles" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_e5a52fc6f7a8dae64f645b0914" ON "roles" ("created_at") `);
        await queryRunner.query(`CREATE TABLE "user_roles" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "user_id" uuid, "role_id" uuid, CONSTRAINT "PK_8acd5cf26ebd158416f477de799" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_8acd5cf26ebd158416f477de79" ON "user_roles" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_57c0e3aef56ade8d2465c237d8" ON "user_roles" ("created_at") `);
        await queryRunner.query(`CREATE TABLE "users" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "name" character varying(200) NOT NULL, "email" character varying(255) NOT NULL, "emailVerified" boolean NOT NULL DEFAULT false, "displayName" character varying(255), "photoUrl" text, "is_active" boolean NOT NULL DEFAULT false, "password" character varying(255), "firebase_token" text, "firebase_uid" character varying, "meta_token" text, CONSTRAINT "UQ_97672ac88f789774dd47f7c8be3" UNIQUE ("email"), CONSTRAINT "UQ_2d4a15c7f8b3864a5465fb687ee" UNIQUE ("name", "email"), CONSTRAINT "PK_a3ffb1c0c8416b9fc6f907b7433" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_a3ffb1c0c8416b9fc6f907b743" ON "users" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_c9b5b525a96ddc2c5647d7f7fa" ON "users" ("created_at") `);
        await queryRunner.query(`CREATE TABLE "user_tokens" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "token" character varying(100) NOT NULL, "is_used" boolean NOT NULL DEFAULT false, "type" "public"."user_tokens_type_enum" NOT NULL, "expires_at" TIMESTAMP NOT NULL, "user_id" uuid NOT NULL, CONSTRAINT "PK_63764db9d9aaa4af33e07b2f4bf" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_63764db9d9aaa4af33e07b2f4b" ON "user_tokens" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_78a9d3ee8e6f794a256734a43b" ON "user_tokens" ("created_at") `);
        await queryRunner.query(`CREATE TABLE "user_sessions" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "user_id" uuid NOT NULL, "device_token" character varying, "device_type" character varying, CONSTRAINT "PK_e93e031a5fed190d4789b6bfd83" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_e93e031a5fed190d4789b6bfd8" ON "user_sessions" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_3c7d38f304121da68fb6b04c01" ON "user_sessions" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_e9658e959c490b0a634dfc5478" ON "user_sessions" ("user_id") `);
        await queryRunner.query(`CREATE TABLE "notifications" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "type" character varying(64) NOT NULL, "recipient_user_id" uuid, "payload" jsonb, "status" character varying(32) NOT NULL DEFAULT 'pending', "attempts" integer NOT NULL DEFAULT '0', "last_attempt_at" TIMESTAMP WITH TIME ZONE, "recipientUserId" uuid, CONSTRAINT "PK_6a72c3c0f683f6462415e653c3a" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_6a72c3c0f683f6462415e653c3" ON "notifications" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_77ee7b06d6f802000c0846f3a5" ON "notifications" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_2726bde496d82b6401532ab147" ON "notifications" ("recipient_user_id") `);
        await queryRunner.query(`CREATE TABLE "ad_action_logs" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "deleted_at" TIMESTAMP, "created_by" uuid, "updated_by" uuid, "deleted_by" uuid, "user_id" uuid, "ad_account_id" uuid, "action" character varying(128) NOT NULL, "payload" jsonb, "result_status" character varying(32) NOT NULL, "error_message" text, "meta" jsonb, CONSTRAINT "PK_bb29098a20ae007fb1324bce90d" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_bb29098a20ae007fb1324bce90" ON "ad_action_logs" ("id") `);
        await queryRunner.query(`CREATE INDEX "IDX_053ecfe48d1ffee418111712bd" ON "ad_action_logs" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_76f23bc9b3e668c5d89c15f695" ON "ad_action_logs" ("user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_0c9516f218ee8b212e588be9dd" ON "ad_action_logs" ("ad_account_id") `);
        await queryRunner.query(`ALTER TABLE "admin_audit_logs" ADD CONSTRAINT "FK_95c41f4b81315ea060cacd55d5f" FOREIGN KEY ("adminUserId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "creatives" ADD CONSTRAINT "FK_3fbb04feac1e9531d7aa697ea10" FOREIGN KEY ("adAccountId") REFERENCES "ad_accounts"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "insights" ADD CONSTRAINT "FK_413ad24eb133aac419837c153b6" FOREIGN KEY ("adAccountId") REFERENCES "ad_accounts"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "insights" ADD CONSTRAINT "FK_4ccafb322fe54bef86cec6ee078" FOREIGN KEY ("campaignId") REFERENCES "campaigns"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "insights" ADD CONSTRAINT "FK_7b6fe078454855bedf0003535e8" FOREIGN KEY ("adSetId") REFERENCES "ad_sets"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "insights" ADD CONSTRAINT "FK_963ab0aba44df4a8e5549759568" FOREIGN KEY ("adId") REFERENCES "ads"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "ads" ADD CONSTRAINT "FK_7363b998ad5ca90d01dc890e59d" FOREIGN KEY ("adSetId") REFERENCES "ad_sets"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "ads" ADD CONSTRAINT "FK_4d3ed8e757429c2281d5abd5008" FOREIGN KEY ("creativeId") REFERENCES "creatives"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "ad_sets" ADD CONSTRAINT "FK_308e787e9b85505ca65945829b4" FOREIGN KEY ("campaignId") REFERENCES "campaigns"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "campaigns" ADD CONSTRAINT "FK_a4a7ec37b5ae7f451c31a23c6cf" FOREIGN KEY ("adAccountId") REFERENCES "ad_accounts"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "conversion_events" ADD CONSTRAINT "FK_cf3f6f95d2777109c57c723f205" FOREIGN KEY ("adAccountId") REFERENCES "ad_accounts"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "rate_limits" ADD CONSTRAINT "FK_aebce809b42902f1fbbd657be8c" FOREIGN KEY ("adAccountId") REFERENCES "ad_accounts"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_ad_accounts" ADD CONSTRAINT "FK_66e59dab01c837e55eac094b2d5" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_ad_accounts" ADD CONSTRAINT "FK_244bd1ffd473a74b450106277e0" FOREIGN KEY ("ad_account_id") REFERENCES "ad_accounts"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_ad_accounts" ADD CONSTRAINT "FK_36df5c365164eecd2ae7ed0dffc" FOREIGN KEY ("meta_token_id") REFERENCES "meta_tokens"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "token_refresh_logs" ADD CONSTRAINT "FK_c343f226fb1ec2686415cf34331" FOREIGN KEY ("metaTokenId") REFERENCES "meta_tokens"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "meta_tokens" ADD CONSTRAINT "FK_32cd1512c02f087164a00b898eb" FOREIGN KEY ("owner_user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "meta_tokens" ADD CONSTRAINT "FK_d8587fead434bdb12dc8cd37c8c" FOREIGN KEY ("ad_account_id") REFERENCES "ad_accounts"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_roles" ADD CONSTRAINT "FK_87b8888186ca9769c960e926870" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_roles" ADD CONSTRAINT "FK_b23c65e50a758245a33ee35fda1" FOREIGN KEY ("role_id") REFERENCES "roles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_tokens" ADD CONSTRAINT "FK_9e144a67be49e5bba91195ef5de" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_sessions" ADD CONSTRAINT "FK_e9658e959c490b0a634dfc54783" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "FK_0be815cabd15a62a5546a4b1357" FOREIGN KEY ("recipientUserId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "FK_0be815cabd15a62a5546a4b1357"`);
        await queryRunner.query(`ALTER TABLE "user_sessions" DROP CONSTRAINT "FK_e9658e959c490b0a634dfc54783"`);
        await queryRunner.query(`ALTER TABLE "user_tokens" DROP CONSTRAINT "FK_9e144a67be49e5bba91195ef5de"`);
        await queryRunner.query(`ALTER TABLE "user_roles" DROP CONSTRAINT "FK_b23c65e50a758245a33ee35fda1"`);
        await queryRunner.query(`ALTER TABLE "user_roles" DROP CONSTRAINT "FK_87b8888186ca9769c960e926870"`);
        await queryRunner.query(`ALTER TABLE "meta_tokens" DROP CONSTRAINT "FK_d8587fead434bdb12dc8cd37c8c"`);
        await queryRunner.query(`ALTER TABLE "meta_tokens" DROP CONSTRAINT "FK_32cd1512c02f087164a00b898eb"`);
        await queryRunner.query(`ALTER TABLE "token_refresh_logs" DROP CONSTRAINT "FK_c343f226fb1ec2686415cf34331"`);
        await queryRunner.query(`ALTER TABLE "user_ad_accounts" DROP CONSTRAINT "FK_36df5c365164eecd2ae7ed0dffc"`);
        await queryRunner.query(`ALTER TABLE "user_ad_accounts" DROP CONSTRAINT "FK_244bd1ffd473a74b450106277e0"`);
        await queryRunner.query(`ALTER TABLE "user_ad_accounts" DROP CONSTRAINT "FK_66e59dab01c837e55eac094b2d5"`);
        await queryRunner.query(`ALTER TABLE "rate_limits" DROP CONSTRAINT "FK_aebce809b42902f1fbbd657be8c"`);
        await queryRunner.query(`ALTER TABLE "conversion_events" DROP CONSTRAINT "FK_cf3f6f95d2777109c57c723f205"`);
        await queryRunner.query(`ALTER TABLE "campaigns" DROP CONSTRAINT "FK_a4a7ec37b5ae7f451c31a23c6cf"`);
        await queryRunner.query(`ALTER TABLE "ad_sets" DROP CONSTRAINT "FK_308e787e9b85505ca65945829b4"`);
        await queryRunner.query(`ALTER TABLE "ads" DROP CONSTRAINT "FK_4d3ed8e757429c2281d5abd5008"`);
        await queryRunner.query(`ALTER TABLE "ads" DROP CONSTRAINT "FK_7363b998ad5ca90d01dc890e59d"`);
        await queryRunner.query(`ALTER TABLE "insights" DROP CONSTRAINT "FK_963ab0aba44df4a8e5549759568"`);
        await queryRunner.query(`ALTER TABLE "insights" DROP CONSTRAINT "FK_7b6fe078454855bedf0003535e8"`);
        await queryRunner.query(`ALTER TABLE "insights" DROP CONSTRAINT "FK_4ccafb322fe54bef86cec6ee078"`);
        await queryRunner.query(`ALTER TABLE "insights" DROP CONSTRAINT "FK_413ad24eb133aac419837c153b6"`);
        await queryRunner.query(`ALTER TABLE "creatives" DROP CONSTRAINT "FK_3fbb04feac1e9531d7aa697ea10"`);
        await queryRunner.query(`ALTER TABLE "admin_audit_logs" DROP CONSTRAINT "FK_95c41f4b81315ea060cacd55d5f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_0c9516f218ee8b212e588be9dd"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_76f23bc9b3e668c5d89c15f695"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_053ecfe48d1ffee418111712bd"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_bb29098a20ae007fb1324bce90"`);
        await queryRunner.query(`DROP TABLE "ad_action_logs"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_2726bde496d82b6401532ab147"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_77ee7b06d6f802000c0846f3a5"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_6a72c3c0f683f6462415e653c3"`);
        await queryRunner.query(`DROP TABLE "notifications"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e9658e959c490b0a634dfc5478"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_3c7d38f304121da68fb6b04c01"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e93e031a5fed190d4789b6bfd8"`);
        await queryRunner.query(`DROP TABLE "user_sessions"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_78a9d3ee8e6f794a256734a43b"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_63764db9d9aaa4af33e07b2f4b"`);
        await queryRunner.query(`DROP TABLE "user_tokens"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_c9b5b525a96ddc2c5647d7f7fa"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_a3ffb1c0c8416b9fc6f907b743"`);
        await queryRunner.query(`DROP TABLE "users"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_57c0e3aef56ade8d2465c237d8"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_8acd5cf26ebd158416f477de79"`);
        await queryRunner.query(`DROP TABLE "user_roles"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e5a52fc6f7a8dae64f645b0914"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_c1433d71a4838793a49dcad46a"`);
        await queryRunner.query(`DROP TABLE "roles"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_32cd1512c02f087164a00b898e"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_44e70bd1d194cb1da9f20ca81f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_43894782234c465cf5b49fd689"`);
        await queryRunner.query(`DROP TABLE "meta_tokens"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_62c6b69edeb5bb6f0445cd87b7"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_879cb08cd16c228eea265d6992"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_35912590277ffacdd08af620b4"`);
        await queryRunner.query(`DROP TABLE "token_refresh_logs"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_207a8e07a6d3e47a11e610a80f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e44e40b2162520d4f99c1c5956"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_7f3f9205ab9fc8719688750795"`);
        await queryRunner.query(`DROP TABLE "ad_accounts"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_244bd1ffd473a74b450106277e"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_66e59dab01c837e55eac094b2d"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_c5d0df39c2f3c16e7809208070"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_829aab27d2a098ba960ce1e5fb"`);
        await queryRunner.query(`DROP TABLE "user_ad_accounts"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_71371f5e33477eb6edb6c28420"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_7998a92d0bf5f034883c5be736"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_3b4449f1f5fc167d921ee619f6"`);
        await queryRunner.query(`DROP TABLE "rate_limits"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d9d250303f16a274bb12ade90a"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_8913f8cec63bc8fa52c67ceaa4"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_3153e3513a6cd44a85bf528705"`);
        await queryRunner.query(`DROP TABLE "conversion_events"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_bb70cefacb92ef436f66ee0464"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e787e23857eab09fbffacddd23"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_831e3fcd4fc45b4e4c3f57a9ee"`);
        await queryRunner.query(`DROP TABLE "campaigns"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_da62bc088aa0c99505b9bddbcc"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_fd100d5f98b1088abc4a108a6e"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_94c878d0598e5927e7043a2656"`);
        await queryRunner.query(`DROP TABLE "ad_sets"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_6a5671a83d8202c58be7d6516f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_1b70b1ae6d80cac88bd0991eb4"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_a7af7d1998037a97076f758fc2"`);
        await queryRunner.query(`DROP TABLE "ads"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d76debc5a3479e113128c75feb"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_833a8b46ce0b25f698e4488f82"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_8616ab29fa49b7942541b8c964"`);
        await queryRunner.query(`DROP TABLE "insights"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_a6c42deca918327898e63eb1df"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_c563ad6c645f306859978ea03d"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_fb146841da64b2b38449f618da"`);
        await queryRunner.query(`DROP TABLE "creatives"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_8937fba1af21d770ab36a16e8e"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_ee43923e8ce21dbe10bccaba85"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_de7a8fc2fbb525484c71a86bb9"`);
        await queryRunner.query(`DROP TABLE "admin_audit_logs"`);
    }

}
